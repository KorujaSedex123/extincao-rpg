/* ==========================================================================
   EXTINÇÃO RPG - ESTILO TÁTICO FINAL (V3.0)
   ========================================================================== */

/* 1. GERAL (Janela e Fundo) */
.extincao-sheet.window-app .window-content {
    background: #0f0f0f;
    color: #cccccc;
    font-family: "Courier New", monospace;
    letter-spacing: 0.5px;
    padding: 0;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.extincao-sheet img { border: none; max-width: 100%; }

/* ==========================================================================
   2. CABEÇALHO INTEGRADO (HUD)
   ========================================================================== */

.extincao-sheet .sheet-header {
    background: #1a1a1a;
    padding: 5px 10px;
    border-bottom: 2px solid #444;
    flex: 0 0 auto;
}

.extincao-sheet .header-grid {
    display: flex;
    gap: 10px;
    align-items: center;
}

/* FOTO */
.extincao-sheet .profile-img-container { flex: 0 0 80px; position: relative; }
.extincao-sheet .profile-img { 
    width: 80px; height: 80px; 
    border: 1px solid #555; background: #000; object-fit: cover; 
}
.extincao-sheet .lock-status { 
    position: absolute; bottom: 2px; right: 2px; 
    color: #f44; background: rgba(0,0,0,0.8); 
    padding: 1px 3px; font-size: 0.7em; 
}

/* CENTRO (Dados) */
.extincao-sheet .header-main {
    flex: 1; display: flex; flex-direction: column; gap: 4px;
}

/* Linha A: Nome + Arquétipo */
.extincao-sheet .header-row-top {
    display: flex; align-items: center; gap: 10px;
    border-bottom: 1px solid #333; padding-bottom: 2px;
}

.extincao-sheet .charname { flex: 1; margin: 0; }
.extincao-sheet .charname input {
    background: transparent; border: none;
    color: #fff; font-size: 1.5em; font-weight: 900;
    width: 100%; padding: 0; height: auto;
    font-family: "Courier New", monospace;
}

.extincao-sheet .archetype-box select {
    background: #000; color: #4eff8c; border: 1px solid #333;
    font-size: 0.8em; padding: 2px; width: 130px;
    font-family: "Courier New", monospace;
}

.extincao-sheet .lock-btn { color: #555; cursor: pointer; font-size: 1em; }
.extincao-sheet .lock-btn:hover { color: #fff; text-shadow: 0 0 5px red; }

/* Linha B: Estresse */
.extincao-sheet .header-row-middle { display: flex; align-items: center; }
.extincao-sheet .stress-bar-compact { display: flex; align-items: center; gap: 8px; width: 100%; }
.extincao-sheet .label-mini { font-size: 0.6em; color: #666; font-weight: bold; min-width: 45px; text-transform: uppercase; }
.extincao-sheet .stress-track { display: flex; gap: 4px; flex: 1; }
.extincao-sheet .stress-box {
    width: 10px; height: 10px; border-radius: 50%;
    background: #222; border: 1px solid #444; cursor: pointer;
}
.extincao-sheet .stress-box.active { background: #fc0; box-shadow: 0 0 5px #fc0; border-color: #fff; }

/* Linha C: Infecção e Condições */
.extincao-sheet .header-row-bottom {
    display: flex; align-items: center; justify-content: space-between;
    background: #080808; border-radius: 2px; padding: 2px 5px; border: 1px solid #222;
}

.extincao-sheet .mini-infection { display: flex; align-items: center; gap: 5px; }
.extincao-sheet .stages-mini { display: flex; gap: 3px; }

/* Bolinhas de Infecção */
.extincao-sheet .stage-dot {
    width: 12px; height: 12px; border-radius: 50%;
    background: #222; border: 1px solid #444; cursor: pointer;
    display: block; transition: all 0.2s;
}
.extincao-sheet .stage-dot:hover { transform: scale(1.2); }
.extincao-sheet .stage-dot.active.safe { background: #4f8; box-shadow: 0 0 4px #4f8; }
.extincao-sheet .stage-dot.active.warn { background: #fc0; box-shadow: 0 0 4px #fc0; }
.extincao-sheet .stage-dot.active.danger { background: #f80; box-shadow: 0 0 4px #f80; }
.extincao-sheet .stage-dot.active.critical { background: #f00; box-shadow: 0 0 4px #f00; animation: pulse 1s infinite; }

.extincao-sheet .mini-conditions { display: flex; gap: 3px; }
.extincao-sheet .condition-btn {
    width: 20px; height: 20px; font-size: 0.7em;
    display: flex; align-items: center; justify-content: center;
    background: #111; border: 1px solid #333; color: #444;
    border-radius: 50%; cursor: pointer;
}
.extincao-sheet .condition-btn.active { background: #310; color: #f44; border-color: #f44; box-shadow: 0 0 4px #f00; }

/* DIREITA: STATS VITAIS */
.extincao-sheet .header-stats { display: flex; flex-direction: column; gap: 4px; width: 90px; }
.extincao-sheet .resource-box { background: #111; border: 1px solid #333; padding: 2px; text-align: center; }
.extincao-sheet .resource-box label { font-size: 0.6em; color: #888; display: block; font-weight: bold; }
.extincao-sheet .resource-inputs { display: flex; justify-content: center; align-items: center; gap: 2px; }
.extincao-sheet .resource-box input {
    width: 30px; height: 20px; text-align: center; background: transparent;
    border: none; border-bottom: 1px solid #444; font-size: 1.1em; font-weight: bold; color: #fff;
}
.extincao-sheet .resource-box.health input { color: #f44; }
.extincao-sheet .resource-box.stamina input { color: #4f8; }

/* ==========================================================================
   3. MENU DE NAVEGAÇÃO (SLIM)
   ========================================================================== */
.extincao-sheet .sheet-tabs {
    flex: 0 0 24px; display: flex; background: #000; border-bottom: 1px solid #333; margin: 0; padding: 0;
}
.extincao-sheet .sheet-tabs .item {
    flex: 1; display: flex; align-items: center; justify-content: center;
    background: transparent; color: #555; font-size: 0.75em; font-weight: bold;
    border-right: 1px solid #111; cursor: pointer; text-transform: uppercase;
}
.extincao-sheet .sheet-tabs .item:hover { color: #ccc; background: #080808; }
.extincao-sheet .sheet-tabs .item.active { background: #151515; color: #fff; border-bottom: 2px solid #f44; }

/* ==========================================================================
   4. CORPO E ATRIBUTOS
   ========================================================================== */
.extincao-sheet .sheet-body { flex: 1; overflow-y: auto; padding: 10px; }
.extincao-sheet .attributes-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
.extincao-sheet .attr-column { background: #151515; border: 1px solid #333; }

.extincao-sheet .attributes-section {
    display: flex;
    gap: 10px;
    justify-content: space-between;
    margin-bottom: 10px;
}

.extincao-sheet .attr-box-standalone {
    background: #151515;
    border: 1px solid #333;
    flex: 1; /* Todos com mesmo tamanho */
    border-radius: 4px;
}

/* Cabeçalho do Atributo */
.extincao-sheet .attr-header {
    background: transparent; padding: 5px; text-align: center; cursor: default;
}
.extincao-sheet .attr-header.rollable { cursor: pointer; }
.extincao-sheet .attr-header.rollable:hover { background: #222; }

/* Input Atributo */
.extincao-sheet .attr-val-input {
    font-size: 2em !important; font-weight: 900; width: 100%; background: transparent !important;
    border: none !important; color: #fff !important; text-align: center; height: 40px; cursor: text;
}
.extincao-sheet.locked .attr-val-input { pointer-events: none; }
.extincao-sheet .attr-label { font-size: 0.8em; font-weight: bold; color: #888; text-transform: uppercase; letter-spacing: 1px; }

.separator-line { border: 0; border-top: 1px solid #333; margin: 10px 0; }

/* Perícias */
.extincao-sheet .skills-list { display: flex; flex-direction: column; gap: 2px; }
.extincao-sheet .skill-item {
    display: flex; justify-content: space-between; align-items: center; padding: 3px 5px; 
    border-bottom: 1px solid #1a1a1a; font-size: 0.85em;
}
.extincao-sheet .skill-item:hover { background: #151515; }
.extincao-sheet .skill-name { color: #aaa; cursor: default; flex: 1; }
.extincao-sheet .skill-name.rollable { cursor: pointer; }
.extincao-sheet .skill-name.rollable:hover { color: #fff; text-decoration: underline; }
.extincao-sheet .skill-input {
    width: 24px; height: 20px; text-align: center; font-size: 1em;
    background: rgba(0,0,0,0.5); border: 1px solid #333; color: #fff; border-radius: 2px;
}

.extincao-sheet .skills-section {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* 3 Colunas */
    gap: 10px;
}
.extincao-sheet .skill-group-col {
    background: #0a0a0a;
    border: 1px solid #222;
    padding: 5px;
    border-radius: 4px;
}

.extincao-sheet .skill-group-header {
    font-size: 0.7em;
    text-transform: uppercase;
    color: #444;
    border-bottom: 1px solid #222;
    margin-bottom: 5px;
    text-align: center;
    font-weight: bold;
}
/* ==========================================================================
   5. INPUTS GERAIS E DADOS (CHAT)
   ========================================================================== */
.extincao-sheet input, .extincao-sheet select { background-color: #050505; color: #fff; border: 1px solid #444; }
.extincao-sheet.locked input, .extincao-sheet.locked select { background: transparent !important; border: none !important; pointer-events: none; appearance: none; }

.extincao-roll { background: #111; border: 1px solid #444; padding: 8px; color: #ccc; font-family: "Courier New", monospace; border-left: 3px solid #800; }
.extincao-roll .roll-result { font-size: 1.3em; font-weight: 900; text-align: center; padding: 5px; margin: 5px 0; border-radius: 4px; }
.extincao-roll .roll-result.success { color: #4f8; border: 1px solid #4f8; background: rgba(78, 255, 140, 0.1); }
.extincao-roll .roll-result.failure { color: #888; border: 1px solid #444; }
.extincao-roll .roll-result.glitch { color: #f00; border: 1px solid #f00; animation: pulse 1s infinite; }
.extincao-roll .dice-tray { text-align: center; margin: 5px 0; }
.extincao-roll .die { display: inline-block; width: 24px; height: 24px; line-height: 24px; margin: 2px; border-radius: 4px; font-weight: bold; text-align: center; border: 1px solid #444; }
.extincao-roll .die.white { background: #e0e0e0; color: #000; }
.extincao-roll .die.red { background: #800; color: #fff; border-color: #f44; }

@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

/* ==========================================================================
   CORREÇÃO DO DROPDOWN (MENU DE OPÇÕES)
   ========================================================================== */

.extincao-sheet select {
    background-color: #000 !important;
    color: #4eff8c !important; /* Verde Matrix no texto selecionado */
    border: 1px solid #444 !important;
    cursor: pointer;
}

/* As opções dentro da lista */
.extincao-sheet select option {
    background-color: #111 !important; /* Fundo escuro */
    color: #fff !important;            /* Texto branco */
    padding: 5px;
}

/* Quando passa o mouse ou seleciona (depende do navegador, mas ajuda) */
.extincao-sheet select option:checked,
.extincao-sheet select option:hover {
    background-color: #333 !important;
    color: #4eff8c !important;
}